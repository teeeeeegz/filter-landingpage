<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Quit Porn – Enabling the Web Extension</title>

    <link href="./assets/css/style.css" rel="stylesheet" type="text/css" />
    <link rel="icon" href="./favicon.png" />

    <!-- <meta name="theme-color" content="#F2F2F7" media="(prefers-color-scheme: light)" />
        <meta name="theme-color" content="#1C1C1E" media="(prefers-color-scheme: dark)" /> -->
</head>

<body>
    <div id="onboardingContainer" class="tutorial ipad">
        <h1>Enabling the <strong>Quit Porn</strong> Safari Web Extension</h1>
        <p class="intro">That's step 1 done! You're almost there.</p>

        <div class="step"><img src="./assets/onboarding/step.checkmark.dim.svg" alt="Checkmark" />
            <div class="explainer done">Open Safari – That's done!</div>
        </div>

        <!-- Add iphone-only / ipad-only to `class` value to restrict visibility of instructions-->
        <div class="step"><img src="./assets/onboarding/step.2.svg" alt="Step 2" class="count" />
            <div class="explainer">Tap the <img src="./assets/onboarding/icon-aa.svg" alt="aA"
                    style="display: inline-block; margin-bottom: -1px;" /> <strong>button</strong>
                in the address bar <img src="./assets/onboarding/screenshots/info_webextension_aa.png"
                    alt="Address bar with aA button circled" />
            </div>
        </div>

        <!-- <div class="step ipad-only"><img src="./assets/onboarding/step.2.svg" alt="Step 2" class="count" />
            <div class="explainer">Tap the <img src="./assets/onboarding/icon-aa.svg" alt="aA"
                    style="display: inline-block; margin-bottom: -3px; margin-left: 2px;" />
                <strong>button</strong> in the address bar <img src="./assets/onboarding/screenshots/info_webextension_aa.png"
                    alt="Address bar with aA button circled" /> 

            </div>
        </div> -->

        <div class="step"><img src="./assets/onboarding/step.3.svg" alt="Step 3" class="count" />
            <div class="explainer">Tap <strong>Manage Extensions</strong> <img src="./assets/onboarding/icon-puzzle.svg"
                    alt="aA" style="display: inline-block; margin-bottom: -3px;" /> <img
                    src="./assets/onboarding/screenshots/info_webextension_manageextensions.png" alt="Manage Extensions menu button" />
            </div>
        </div>
        
        <div class="step"><img src="./assets/onboarding/step.4.svg" alt="Step 4" class="count" />
            <div class="explainer">Enable <strong>Quit</strong> and tap <strong>Done</strong> 

                <img src="./assets/onboarding/screenshots/info_webextension_enable.png" alt="Quit switch list item" />
            <!-- <span class="sub">Is the
                Noir toggle disabled and grayed out? You may have to briefly
                turn off Web Restrictions. <a onclick="showsecondary('webrestrictionsinfo')">Read more.</a></span> -->
                <!-- <div id="webrestrictionsinfo" class="secondary" style="display: none;">
                    <p>iOS doesn’t let you enable Safari Extensions when Web Restrictions are
                        enabled. You can check if you have these enabled in the Settings app
                        &gt; Screen Time &gt; Content &amp; Privacy Restrictions &gt; Content
                        Restrictions &gt; Web Content.
                    </p>
                    <p>If possible, please briefly turn these restrictions off, and enable Noir. You
                        can then safely turn the web restrictions back on, Noir will keep
                        working.
                    </p>
                    <p>If this doesn't work or if you'd like more info, please <a
                            href="mailto:support@getnoir.app?subject=Enabling%20Noir">contact
                            Support</a>.
                    </p>
                </div> -->
            </div>
        </div>
        
        <div class="step"><img src="./assets/onboarding/step.5.svg" alt="Step 5" class="count" />
            <div class="explainer">Tap <strong>Quit</strong> <img src="./assets/onboarding/icon.moon.circle.svg"
                    alt="aA" style="display: inline-block; margin-bottom: -4px;" />

                    <img src="./assets/onboarding/screenshots/info_webextension_popovermenubutton.png" alt="Show Quit popover menu button" />
            </div>
        </div>
        
        <div class="step"><img src="./assets/onboarding/step.6.svg" alt="Step 6" class="count" />
            <div class="explainer">Tap <strong>Always Allow...</strong> and then <strong>Always Allow on
                    Every Website</strong>
            </div>
        </div>
        <!-- <div class="note"><span>Trouble enabling Noir?</span> <a
                href="mailto:support@getnoir.app?subject=Enabling%20Noir">Contact Support</a>
        </div> -->

        <div id="confirmation" class="confirmation">
            <div id="medalContainer">
                <div><img src="./assets/onboarding/step.checkmark.svg" alt="Done" />
                    <h2>Done!</h2>
                </div>
            </div>

            <!-- <p>Feel free to close this page, or return to the Noir app to configure Noir's default settings,
                such as when Noir activates and the theme used by Noir.
            </p> -->
            
            <a href="adultfilter://" class="button">Open Quit Porn app</a>
            
            <!-- <div id="darkModeInfo" class="aside">
                <div class="title"><img src="./assets/onboarding/step.exclamationmark.svg" alt="!" />
                    <span>Your device's Dark Mode is currently not enabled</span>
                </div>
                <div class="info">By default, Noir will only darken websites whenever your device's dark
                    mode is turned on. You can change this behavior in the Noir app.
                </div>
            </div> -->
        </div>

    </div>

    <script type="text/javascript">                        
    
        const urlSearchParams = new URLSearchParams(window.location.search);
        const context = urlSearchParams.get('context');
        const isAppContext = (context == 'app' || context == 'report');
        if (isAppContext) {
            document.querySelector('header').style.display = 'none'
            document.querySelector('footer').style.display = 'none'
            document.querySelector('h1').style.display = 'none'
            document.documentElement.classList.add('app');

            const idiom = urlSearchParams.get('idiom');
            if (idiom) {
                document.documentElement.classList.add(idiom);
            }
        }

        const iPhonePlatforms = ['iPhone Simulator', 'iPod Simulator', 'iPhone', 'iPod'];
        const isiPhone = iPhonePlatforms.includes(navigator.platform);
        document.getElementById('onboardingContainer').classList.add((isiPhone) ? 'iphone' : 'ipad');

    //     if (document.documentElement.classList.contains('noir-ping')) {
    //         markDone();
    //     }

    //     document.addEventListener('noir-ping', () =& gt; {
    //         markDone();
    //     });

    //     function markDone() {
    //         document.getElementById('onboardingContainer').classList.add('done');
    //     }

    //     function showsecondary(name) {
    //         if (document.getElementById(name).style.display == 'block') {
    //             document.getElementById(name).style.display = 'none';
    //         } else {
    //             document.getElementById(name).style.display = 'block';
    //         }
    //     }

    //     function positionMedal() {
    //         const confirmationContainer = document.getElementById('confirmation');
    //         const confirmationContainerPosition = confirmationContainer.getBoundingClientRect().top;

    //         const windowHeight = window.innerHeight;
    //         const availableHeight = (windowHeight / 2) - confirmationContainerPosition;

    //         console.log(confirmationContainerPosition, windowHeight, availableHeight);

    //         const medalContainer = document.getElementById('medalContainer');
    //         medalContainer.style.minHeight = `${availableHeight}px`
    //     }

    //     function showDarkModeInfo() {
    //         const asideElement = document.getElementById('darkModeInfo');

    //         const darkModeEnabled = window.matchMedia('(prefers-color-scheme: dark)').matches;
    //         if (!darkModeEnabled) {
    //             asideElement.classList.remove('hidden');
    //         } else {
    //             asideElement.classList.add('hidden');
    //         }
    //     }

    //     if (isiPhone) {
    //         positionMedal();
    //     }

    //     showDarkModeInfo();
    //     window.matchMedia('(prefers-color-scheme: dark)').addListener(showDarkModeInfo);
    </script>
</body>

</html>